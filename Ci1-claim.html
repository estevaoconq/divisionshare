<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Division Credit 1 | Division Share</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Space_Grotesk:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body class="bg-[#0B0F1A] text-white font-['Space_Grotesk']">
    <!-- Sidebar - esconder em mobile -->
    <aside class="fixed left-0 top-0 h-screen w-[300px] bg-[#151B2B] hidden md:block">
        <!-- Container da Anima√ß√£o -->
        <div class="w-full h-[300px] relative mt-8">
            <iframe 
                src="./solana-animation.html" 
                class="w-full h-full absolute inset-0"
                frameborder="0"
                scrolling="no"
                allowtransparency="true"
                style="pointer-events: auto; background: transparent;"
            ></iframe>
        </div>

        <!-- Menu de Navega√ß√£o -->
        <div class="p-4">
            <nav class="space-y-4">
                <a href="/" class="flex items-center space-x-3 text-yellow-500 px-4 py-2 rounded-lg bg-[#2A3447]">
                    <span>üí∞</span>
                    <span>Buy Tokens</span>
                </a>
                <a href="#" class="flex items-center space-x-3 text-gray-400 hover:text-white px-4 py-2">
                    <span>üìä</span>
                    <span>Portfolio</span>
                </a>
                <div class="flex items-center justify-between space-x-3 text-gray-400 px-4 py-2 opacity-50 cursor-not-allowed">
                    <div class="flex items-center space-x-3">
                        <span>‚ö°</span>
                        <span>Staking</span>
                    </div>
                    <span class="text-xs bg-gray-700 px-2 py-1 rounded">Coming Soon</span>
                </div>
                <div class="flex items-center justify-between space-x-3 text-gray-400 px-4 py-2 opacity-50 cursor-not-allowed">
                    <div class="flex items-center space-x-3">
                        <span>üèõÔ∏è</span>
                        <span>Governance</span>
                    </div>
                    <span class="text-xs bg-gray-700 px-2 py-1 rounded">Coming Soon</span>
                </div>
            </nav>

            <div class="absolute bottom-8 left-4 space-y-2">
                <a href="#" class="block text-sm text-gray-400 hover:text-white">Contact Us</a>
                <a href="./whitepaper.html" class="block text-sm text-gray-400 hover:text-white">Whitepaper</a>
                <a href="#" class="block text-sm text-gray-400 hover:text-white">Investment Disclaimer</a>
                <a href="#" class="block text-sm text-gray-400 hover:text-white">Data Privacy Policy</a>
            </div>
        </div>
    </aside>

    <!-- Main Content -->
    <main class="ml-[300px] p-7">
        <!-- Header -->
        <div class="flex items-center justify-between mb-8">
            <div class="flex items-center gap-4">
                <img src="./logo.png" alt="DIV" class="h-8 w-8">
                <h1 class="text-2xl font-medium">Division Credit 1</h1>
            </div>
            <button id="connect-wallet" class="bg-gradient-to-r from-[#3A64D8] to-[#2A9D8F] px-8 py-3 rounded-lg text-white font-medium hover:opacity-90 transition-opacity">
                Connect Wallet
            </button>
        </div>

        <!-- Grid principal -->
        <div class="grid grid-cols-3 gap-8">
            <!-- Coluna da esquerda (2/3) -->
            <div class="col-span-2 space-y-8">
                <!-- Card de Valor do Ativo -->
                <div class="bg-[#151B2B] rounded-lg p-6">
                    <div class="grid grid-cols-2 gap-8">
                        <div>
                            <div class="text-gray-400">Current Asset Value (USD)</div>
                            <div class="text-4xl font-bold mb-4" id="current-asset-value">$1,043,202.65</div>
                            
                            <div class="text-blue-400" id="issue-date">Issue Date: 01/01/2025</div>
                            <div class="text-gray-400">(12% p.a. correction)</div>
                            
                            <div class="mt-2">
                                <span class="text-gray-400">Current exchange rate: </span>
                                <span id="current-rate">R$ 5.75/USD</span>
                            </div>
                            
                            <div class="mt-2">
                                <span class="text-gray-400">Time elapsed: </span>
                                <span class="text-yellow-400" id="days-elapsed">24 days</span>
                            </div>
                            
                            <div class="text-gray-500 text-sm mt-4">
                                Value updated in real-time from issue date
                            </div>
                        </div>

                        <div>
                            <div class="text-gray-400">Future Settlement Value / Token</div>
                            <div class="text-4xl font-bold mb-4">$1.04</div>
                            <div class="text-gray-400">At maturity date</div>
                            <div class="text-gray-400 mt-2">Total Supply: <span id="total-supply">982,906</span> tokens</div>
                        </div>
                    </div>
                </div>

                <!-- Ordens de Venda -->
                <div id="open-sale-section" class="bg-[#151B2B] rounded-lg p-6">
                    <div class="flex justify-between items-center mb-6">
                        <div class="text-xl">Open Sale Orders</div>
                        <div class="text-sm text-gray-400">Available tokens from Treasury</div>
                    </div>

                    <!-- Cabe√ßalho das colunas -->
                    <div class="grid grid-cols-4 px-4 text-sm text-gray-400 mb-2">
                        <div>Token</div>
                        <div>Price</div>
                        <div class="text-right">Available</div>
                        <div class="text-right">Status</div>
                    </div>
                    
                    <div class="space-y-2">
                        <!-- Ordem 1 (Ativa) -->
                        <div class="grid grid-cols-4 items-center p-4 bg-[#1F2B45] rounded-lg">
                            <div class="flex items-center gap-2">
                                <img src="./logo.png" alt="DIV" class="h-8 w-8">
                                <div class="flex flex-col">
                                    <span>DVCR1</span>
                                    <div class="text-xs text-green-500">50% discount</div>
                                </div>
                            </div>
                            <div class="text-xl font-bold">$0.50</div>
                            <div class="text-right text-xl">135,149</div>
                            <div class="flex items-center justify-end gap-4">
                                <div class="flex flex-col items-end">
                                    <span class="text-yellow-500 text-sm">Expires on</span>
                                    <span class="text-yellow-500 text-sm">01/02/2025</span>
                                </div>
                                <button class="bg-green-600 hover:bg-green-700 px-4 py-2 rounded-lg transition-colors whitespace-nowrap">
                                    Buy Now
                                </button>
                            </div>
                        </div>

                        <!-- Ordem 2 -->
                        <div class="grid grid-cols-4 items-center p-4 bg-[#1F2B45] rounded-lg">
                            <div class="flex items-center gap-2">
                                <img src="./logo.png" alt="DIV" class="h-8 w-8">
                                <div class="flex flex-col">
                                    <span>DVCR1</span>
                                    <div class="text-xs text-blue-500">45% discount</div>
                                </div>
                            </div>
                            <div class="text-xl font-bold">$0.55</div>
                            <div class="text-right text-xl">189,209</div>
                            <div class="flex items-center justify-end gap-4">
                                <!-- Este div ser√° atualizado pelo JavaScript -->
                            </div>
                        </div>

                        <!-- Ordem 3 -->
                        <div class="grid grid-cols-4 items-center p-4 bg-[#1F2B45] rounded-lg">
                            <div class="flex items-center gap-2">
                                <img src="./logo.png" alt="DIV" class="h-8 w-8">
                                <div class="flex flex-col">
                                    <span>DVCR1</span>
                                    <span class="text-xs text-purple-500">40% desconto</span>
                                </div>
                            </div>
                            <div class="text-xl font-bold">$0.60</div>
                            <div class="text-right text-xl">216,238</div>
                            <div class="flex items-center justify-end gap-4">
                                <div class="flex flex-col items-end">
                                    <span class="text-yellow-500 text-sm">Expires on</span>
                                    <span class="text-yellow-500 text-sm">03/04/2025</span>
                                </div>
                                <button class="bg-green-600 hover:bg-green-700 px-4 py-2 rounded-lg transition-colors whitespace-nowrap">
                                    Buy Now
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- DEX Trading Section -->
                <div id="dex-section" class="bg-[#151B2B] rounded-lg p-8">
                    <div class="grid grid-cols-2 gap-8 items-center">
                        <!-- Info √† esquerda -->
                        <div class="text-gray-400">
                            <div class="text-green-500 text-lg mb-3">
                                Trading Available on DEX Pools
                            </div>
                            <div class="space-y-2">
                                <div>‚Ä¢ Trade tokens with market liquidity</div>
                                <div>‚Ä¢ Available on multiple DEX platforms</div>
                            </div>
                        </div>
                        
                        <!-- Logos √† direita com links -->
                        <div class="flex justify-end gap-12">
                            <a href="https://raydium.io" target="_blank" rel="noopener noreferrer" 
                               class="hover:opacity-80 transition-opacity">
                                <img src="./raydium.png" alt="Raydium" class="h-10">
                            </a>
                            <a href="https://www.orca.so" target="_blank" rel="noopener noreferrer"
                               class="hover:opacity-80 transition-opacity">
                                <img src="./orca.png" alt="Orca" class="h-10">
                            </a>
                            <a href="https://jup.ag" target="_blank" rel="noopener noreferrer"
                               class="hover:opacity-80 transition-opacity">
                                <img src="./jupiter.png" alt="Jupiter" class="h-10">
                            </a>
                        </div>
                    </div>
                </div>

                <!-- Depois do card de Open Sale Orders -->
                <div class="bg-[#151B2B] rounded-lg p-6 mt-8">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-xl">Price History</h2>
                        <div class="flex items-center gap-2">
                            <span class="text-gray-400">Current upside</span>
                            <span class="text-2xl font-bold text-green-500" id="current-upside"></span>
                        </div>
                    </div>
                    
                    <!-- Container do Gr√°fico -->
                    <div class="relative h-[300px]">
                        <canvas id="priceChart"></canvas>
                    </div>

                    <!-- Timeline de Andamentos -->
                    <div class="mt-12">
                        <h2 class="text-xl mb-6">Andamento do Processo</h2>
                        <div class="relative">
                            <!-- Linha vertical da timeline -->
                            <div class="absolute left-2 top-2 bottom-0 w-0.5 bg-gray-700"></div>

                            <!-- Itens da Timeline -->
                            <div class="space-y-6 ml-8">
                                <!-- Item mais recente -->
                                <div class="relative">
                                    <!-- Marcador -->
                                    <div class="absolute -left-[2rem] w-4 h-4 rounded-full bg-blue-500"></div>
                                    <div class="flex justify-between items-start">
                                        <div>
                                            <h3 class="text-lg font-medium">Despacho Judicial - Homologa√ß√£o do Acordo</h3>
                                            <p class="text-gray-400 mt-1">Juiz homologa acordo entre as partes e determina expedi√ß√£o de alvar√° para pagamento.</p>
                                        </div>
                                        <span class="text-sm text-gray-400 ml-4">15 Mar 2024</span>
                                    </div>
                                </div>

                                <div class="relative">
                                    <div class="absolute -left-[2rem] w-4 h-4 rounded-full bg-gray-600"></div>
                                    <div class="flex justify-between items-start">
                                        <div>
                                            <h3 class="text-lg font-medium">Peti√ß√£o de Acordo Protocolada</h3>
                                            <p class="text-gray-400 mt-1">Partes apresentam termo de acordo para homologa√ß√£o judicial.</p>
                                        </div>
                                        <span class="text-sm text-gray-400 ml-4">28 Fev 2024</span>
                                    </div>
                                </div>

                                <div class="relative">
                                    <div class="absolute -left-[2rem] w-4 h-4 rounded-full bg-gray-600"></div>
                                    <div class="flex justify-between items-start">
                                        <div>
                                            <h3 class="text-lg font-medium">Audi√™ncia de Concilia√ß√£o</h3>
                                            <p class="text-gray-400 mt-1">Realizada audi√™ncia com presen√ßa das partes. Acordo em fase final de negocia√ß√£o.</p>
                                        </div>
                                        <span class="text-sm text-gray-400 ml-4">15 Jan 2024</span>
                                    </div>
                                </div>

                                <div class="relative">
                                    <div class="absolute -left-[2rem] w-4 h-4 rounded-full bg-gray-600"></div>
                                    <div class="flex justify-between items-start">
                                        <div>
                                            <h3 class="text-lg font-medium">Despacho - Designa√ß√£o de Audi√™ncia</h3>
                                            <p class="text-gray-400 mt-1">Juiz designa audi√™ncia de concilia√ß√£o e determina intima√ß√£o das partes.</p>
                                        </div>
                                        <span class="text-sm text-gray-400 ml-4">05 Dez 2023</span>
                                    </div>
                                </div>

                                <div class="relative">
                                    <div class="absolute -left-[2rem] w-4 h-4 rounded-full bg-gray-600"></div>
                                    <div class="flex justify-between items-start">
                                        <div>
                                            <h3 class="text-lg font-medium">Contesta√ß√£o Apresentada</h3>
                                            <p class="text-gray-400 mt-1">R√©u apresenta contesta√ß√£o e proposta inicial de acordo.</p>
                                        </div>
                                        <span class="text-sm text-gray-400 ml-4">20 Nov 2023</span>
                                    </div>
                                </div>

                                <div class="relative">
                                    <div class="absolute -left-[2rem] w-4 h-4 rounded-full bg-gray-600"></div>
                                    <div class="flex justify-between items-start">
                                        <div>
                                            <h3 class="text-lg font-medium">Cita√ß√£o Realizada</h3>
                                            <p class="text-gray-400 mt-1">R√©u citado pessoalmente. Prazo para contesta√ß√£o iniciado.</p>
                                        </div>
                                        <span class="text-sm text-gray-400 ml-4">01 Nov 2023</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Coluna da direita (1/3) -->
            <div class="space-y-8">
                <!-- Card de Verifica√ß√£o -->
                <div class="bg-[#151B2B] rounded-lg p-6">
                    <h2 class="text-xl mb-6">Legal Verification</h2>
                    <div class="flex flex-col items-center space-y-4">
                        <!-- QR Code simplificado -->
                        <div class="bg-white p-4 rounded-lg">
                            <img src="./qr.png" alt="Verify" class="w-32 h-32">
                        </div>
                        <div class="text-sm text-gray-400">
                            Scan to verify authenticity
                        </div>

                        <!-- Link e c√≥digo de valida√ß√£o -->
                        <div class="flex flex-col items-center gap-2 mt-4">
                            <a href="https://assinatura.e-notariado.org.br/validate/5ZGMK-A8VSD-7ZKMQ-G4RYL" 
                               target="_blank"
                               class="text-[#3A64D8] hover:underline">
                                Verify Document Signatures
                            </a>
                            <div class="text-sm text-gray-400">
                                Validation code: 5ZGMK-A8VSD-7ZKMQ-G4RYL
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Card de Overview -->
                <div class="bg-[#151B2B] rounded-lg p-6">
                    <h2 class="text-xl mb-6">Overview</h2>
                    <div class="space-y-4">
                        <!-- 1. Asset Type -->
                        <div class="flex justify-between">
                            <span class="text-[#8899AC]">Asset Type</span>
                            <span>Credit Instrument</span>
                        </div>

                        <!-- 2. Initial Debt Value -->
                        <div class="flex justify-between">
                            <span class="text-[#8899AC]">Initial Debt Value</span>
                            <span>R$ 5,750,000.00</span>
                        </div>

                        <!-- 3. Initial USD Value -->
                        <div class="flex justify-between">
                            <span class="text-[#8899AC]">Initial USD Value</span>
                            <div class="text-right">
                                <div>$982,905.98</div>
                                <div class="text-sm text-[#8899AC]">Initial exchange rate: R$ 5.85/USD</div>
                            </div>
                        </div>

                        <!-- 4. Token Supply (novo) -->
                        <div class="flex justify-between">
                            <span class="text-[#8899AC]">Token Supply</span>
                            <span>982,906 DVCR1</span>
                        </div>

                        <!-- 5. Annual Adjustment -->
                        <div class="flex justify-between">
                            <span class="text-[#8899AC]">Annual Adjustment</span>
                            <span>12% p.a.</span>
                        </div>

                        <!-- 6. Settlement Currency -->
                        <div class="flex justify-between items-center">
                            <span class="text-[#8899AC]">Settlement Currency</span>
                            <div class="flex items-center gap-2">
                                <span class="bg-blue-900 px-2 py-0.5 rounded text-xs">BRL</span>
                                <span>Debt will be paid in Brazilian Real</span>
                            </div>
                        </div>

                        <!-- Linha divis√≥ria -->
                        <div class="border-t border-gray-800"></div>

                        <!-- 7. SPE -->
                        <div class="flex justify-between items-center">
                            <span class="text-[#8899AC]">SPE</span>
                            <div class="flex items-center gap-2">
                                <span>Division Credit SPE 01</span>
                                <a href="#" class="text-blue-400 hover:text-blue-300">View PDF ‚Üí</a>
                            </div>
                        </div>

                        <!-- Linha divis√≥ria -->
                        <div class="border-t border-gray-800"></div>

                        <!-- 8. Token Address -->
                        <div class="flex justify-between items-center">
                            <span class="text-[#8899AC]">Token Address</span>
                            <div class="flex items-center gap-2">
                                <span class="font-mono bg-[#1F2B45] px-2 py-1 rounded">DA5JD...ASDA</span>
                                <button class="p-1 hover:text-blue-400">üìã</button>
                                <button class="p-1 hover:text-blue-400">‚Üó</button>
                            </div>
                        </div>

                        <!-- 9. Token Distribution (novo) -->
                        <div class="space-y-2">
                            <div class="flex justify-between">
                                <span class="text-[#8899AC]">Token Distribution</span>
                            </div>
                            <div class="pl-4 space-y-2">
                                <div class="flex justify-between">
                                    <span class="text-[#8899AC]">‚Ä¢ For Open Sales</span>
                                    <div class="text-right">
                                        <div>540,598 DVCR1</div>
                                        <div class="text-xs text-green-500">50-40% discount</div>
                                    </div>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-[#8899AC]">‚Ä¢ For Pools</span>
                                    <div class="text-right">
                                        <div>442,308 DVCR1</div>
                                        <div class="text-xs text-blue-400">from 35% discount</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Linha divis√≥ria -->
                        <div class="border-t border-gray-800"></div>

                        <!-- 10. Location -->
                        <div class="flex justify-between">
                            <span class="text-[#8899AC]">Location</span>
                            <span>Rio de Janeiro, BR</span>
                        </div>

                        <!-- 11. Smart Contract -->
                        <div class="flex justify-between">
                            <span class="text-[#8899AC]">Smart Contract</span>
                            <a href="#" class="text-blue-400 hover:text-blue-300">View on Explorer ‚Üí</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script>
    // Configura√ß√£o global de datas
    const CONFIG = {
        currentDate: new Date('2025-02-08'),    // Data atual (08/02/2025)
        issueDate: new Date('2025-01-01'),      // Data de emiss√£o
        phase1End: new Date('2025-02-01'),      // Fim da fase 1
        phase2Start: new Date('2025-02-02'),    // In√≠cio da fase 2
        phase2End: new Date('2025-03-02'),      // Fim da fase 2
        phase3Start: new Date('2025-03-03'),    // In√≠cio da fase 3
        phase3End: new Date('2025-04-03'),      // Fim da fase 3
        poolsDate: new Date('2025-04-04')       // Data de trading em pools
    };

    // Fun√ß√£o √∫nica para atualizar toda a interface
    function updateAllInterface() {
        // 1. Atualizar data de emiss√£o
        document.getElementById('issue-date').textContent = 
            `Issue Date: 01/01/2025`; // Formato fixo da data
        
        // 2. Atualizar dias decorridos
        const diffTime = Math.abs(CONFIG.currentDate - CONFIG.issueDate);
        const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
        document.getElementById('days-elapsed').textContent = `${diffDays} days`;
        
        // 3. Atualizar fases de venda
        const orderElements = document.querySelectorAll('.grid.grid-cols-4.items-center');
        
        // Primeira Fase (expirada)
        const phase1Element = orderElements[0];
        phase1Element.classList.add('opacity-75');
        phase1Element.querySelector('.flex.items-center.justify-end').innerHTML = `
            <span class="text-gray-400">Expired</span>
        `;
        
        // Segunda Fase (ativa)
        const phase2Element = orderElements[1];
        phase2Element.classList.remove('opacity-75');
        const phase2Status = phase2Element.querySelector('.flex.items-center.justify-end');
        phase2Status.innerHTML = `
            <div class="flex items-center justify-end gap-4">
                <div class="flex flex-col items-end">
                    <span class="text-yellow-500 text-sm">Expires on</span>
                    <span class="text-yellow-500 text-sm">02/03/2025</span>
                </div>
                <button class="bg-green-600 hover:bg-green-700 px-4 py-2 rounded-lg transition-colors whitespace-nowrap">
                    Buy Now
                </button>
            </div>
        `;
        
        // Terceira Fase (futura)
        const phase3Element = orderElements[2];
        phase3Element.classList.add('opacity-75');
        const phase3Status = phase3Element.querySelector('.flex.items-center.justify-end');
        phase3Status.innerHTML = `
            <span class="text-gray-400">Available on 03/03/2025</span>
        `;

        // Atualizar status do Trading
        const tradingSection = document.querySelector('.text-green-500.text-lg');
        tradingSection.innerHTML = `
            <div class="text-green-500 text-lg mb-3">
                Trading Available on DEX Pools
            </div>
        `;

        // Adicionar destaque baseado na data atual
        const openSaleSection = document.getElementById('open-sale-section');
        const dexSection = document.getElementById('dex-section');

        if (CONFIG.currentDate < CONFIG.poolsDate) {
            // Ainda estamos em per√≠odo de Open Sale
            openSaleSection.classList.add('border-[2px]', 'border-[rgba(58,100,216,0.3)]');
            dexSection.classList.remove('border-[1px]', 'border-[rgba(245,158,11,0.3)]');
        } else {
            // Per√≠odo de DEX Trading
            openSaleSection.classList.remove('border-[2px]', 'border-[rgba(58,100,216,0.3)]');
            dexSection.classList.add('border-[1px]', 'border-[rgba(245,158,11,0.3)]');
        }
    }

    // Remover todos os outros event listeners e manter apenas este
    document.addEventListener('DOMContentLoaded', () => {
        updateAllInterface();
    });
    </script>

    <!-- Adicionar antes do </body> -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        // Fun√ß√£o generateDailyLabels
        function generateDailyLabels(startDate) {
            const labels = [];
            const months = ['Jan', 'Fev', 'Mar', 'Abr', 'Mai', 'Jun', 'Jul', 'Ago', 'Set', 'Out', 'Nov', 'Dez'];
            
            const start = new Date(startDate);
            const today = CONFIG.currentDate; // Usar a data simulada
            
            for (let date = new Date(start); date <= today; date.setDate(date.getDate() + 1)) {
                const day = date.getDate();
                const month = months[date.getMonth()];
                labels.push(`${day} ${month}`);
            }
            
            return labels;
        }

        // Fun√ß√£o para calcular diferen√ßa de dias
        function getDaysDifference(endDate) {
            const end = new Date(endDate);
            const start = CONFIG.issueDate;
            return Math.ceil((end - start) / (1000 * 60 * 60 * 24));
        }

        // Fun√ß√£o para gerar valores de liquida√ß√£o
        function generateSettlementValues(endDate) {
            const days = getDaysDifference(endDate);
            const values = [];
            const baseValue = 1.00; // Valor base sempre come√ßa em $1.00
            const annualRate = 0.12; // 12% a.a.
            
            for (let i = 0; i < days; i++) {
                // Calcular a valoriza√ß√£o proporcional ao tempo decorrido
                const yearFraction = i / 365; // Fra√ß√£o do ano decorrido
                const correction = 1 + (annualRate * yearFraction); // Fator de corre√ß√£o
                const value = baseValue * correction;
                values.push(value);
            }
            
            return values;
        }

        // Fun√ß√£o para gerar valores do Token Price
        function generateTokenPriceValues(endDate) {
            const days = getDaysDifference(endDate);
            const values = [];
            
            for (let i = 0; i < days; i++) {
                const currentDate = new Date(CONFIG.issueDate);
                currentDate.setDate(currentDate.getDate() + i);
                
                // Fase 1: $0.50 at√© 01/02/2025
                if (currentDate <= CONFIG.phase1End) {
                    values.push(0.50);
                }
                // Fase 2: $0.55 de 02/02/2025 at√© 02/03/2025
                else if (currentDate <= CONFIG.phase2End) {
                    values.push(0.55);
                }
                // Fase 3: $0.60 de 03/03/2025 at√© 03/04/2025
                else if (currentDate <= CONFIG.phase3End) {
                    values.push(0.60);
                }
                // Ap√≥s 04/04/2025: mant√©m $0.60
                else {
                    values.push(0.60);
                }
            }
            
            return values;
        }

        // Configura√ß√£o do gr√°fico
        const ctx = document.getElementById('priceChart').getContext('2d');
        const priceChart = new Chart(ctx, {
            type: 'line',
            data: {
                labels: generateDailyLabels('2025-01-01'),
                datasets: [
                    {
                        label: 'Token Price (USD)',
                        data: generateTokenPriceValues('2025-04-05'),
                        borderColor: '#3A64D8',
                        backgroundColor: 'rgba(58, 100, 216, 0.1)',
                        borderWidth: 1.5,
                        fill: false,
                        tension: 0,
                        pointRadius: 0,
                        pointHoverRadius: 6,
                        pointBackgroundColor: '#3A64D8',
                        pointHoverBackgroundColor: '#3A64D8',
                        pointBorderColor: '#3A64D8',
                        pointHoverBorderColor: '#fff',
                        pointBorderWidth: 2,
                        pointHoverBorderWidth: 2,
                        pointHitRadius: 10
                    },
                    {
                        label: 'Future Settlement Value',
                        data: generateSettlementValues('2025-04-05'),
                        borderColor: '#22C55E',
                        backgroundColor: 'rgba(34, 197, 94, 0.1)',
                        borderWidth: 1.5,
                        fill: false,
                        tension: 0.1,
                        pointRadius: 0,
                        pointHoverRadius: 6,
                        pointBackgroundColor: '#22C55E',
                        pointHoverBackgroundColor: '#22C55E',
                        pointBorderColor: '#22C55E',
                        pointHoverBorderColor: '#fff',
                        pointBorderWidth: 2,
                        pointHoverBorderWidth: 2,
                        pointHitRadius: 10
                    }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                interaction: {
                    mode: 'index',
                    intersect: false
                },
                plugins: {
                    legend: {
                        display: true,
                        position: 'top',
                        labels: {
                            color: '#9CA3AF',
                            padding: 20,
                            font: { size: 14 }
                        }
                    },
                    tooltip: {
                        enabled: true,
                        mode: 'index',
                        intersect: false,
                        backgroundColor: '#1F2937',
                        titleColor: '#fff',
                        bodyColor: '#fff',
                        borderColor: '#374151',
                        borderWidth: 1,
                        padding: 12,
                        cornerRadius: 8,
                        titleFont: {
                            size: 14,
                            weight: 'bold'
                        },
                        bodyFont: {
                            size: 13
                        },
                        callbacks: {
                            title: function(tooltipItems) {
                                return tooltipItems[0].label;
                            },
                            label: function(context) {
                                let label = context.dataset.label || '';
                                if (label) {
                                    label += ': ';
                                }
                                if (context.parsed.y !== null) {
                                    label += new Intl.NumberFormat('en-US', { 
                                        style: 'currency', 
                                        currency: 'USD',
                                        minimumFractionDigits: 4,
                                        maximumFractionDigits: 4
                                    }).format(context.parsed.y);
                                }
                                return label;
                            }
                        }
                    }
                },
                scales: {
                    y: {
                        grid: { color: 'rgba(255, 255, 255, 0.1)' },
                        ticks: {
                            color: '#9CA3AF',
                            callback: value => '$' + value.toFixed(2),
                            font: { size: 12 }
                        },
                        min: 0.45,
                        max: 1.10
                    },
                    x: {
                        grid: { color: 'rgba(255, 255, 255, 0.1)' },
                        ticks: {
                            color: '#9CA3AF',
                            maxRotation: 45,
                            minRotation: 45,
                            font: { size: 12 },
                            maxTicksLimit: 8
                        }
                    }
                },
                hover: {
                    mode: 'index',
                    intersect: false
                }
            }
        });
    </script>

    <!-- Fun√ß√£o para calcular a distribui√ß√£o dos tokens para Open Sales -->
    <script>
    function calculateOpenSalesDistribution(initialDebtValueBRL, initialUSDRate) {
        // C√°lculos base
        const initialUSDValue = initialDebtValueBRL / initialUSDRate;
        const tokenSupply = Math.floor(initialUSDValue);
        const forOpenSales = Math.floor(tokenSupply * 0.55);

        // Distribui√ß√£o das ordens
        return {
            price050: Math.floor(forOpenSales * 0.25), // 25% a $0.50
            price055: Math.floor(forOpenSales * 0.35), // 35% a $0.55
            price060: Math.floor(forOpenSales * 0.40)  // 40% a $0.60
        };
    }

    // Exemplo de uso:
    const distribution = calculateOpenSalesDistribution(5750000, 5.85);
    console.log(distribution);
    /* Resultado:
    {
        price050: 135149,  // 25% dos tokens para Open Sales
        price055: 189209,  // 35% dos tokens para Open Sales
        price060: 216240   // 40% dos tokens para Open Sales
    }
    */
    </script>

    <!-- Fun√ß√£o para buscar a cota√ß√£o PTAX do d√≥lar -->
    <script>
    async function getCurrentUSDRate() {
        try {
            // Formatar a data atual no formato requerido pela API (MM-DD-YYYY)
            const today = new Date();
            const month = String(today.getMonth() + 1).padStart(2, '0');
            const day = String(today.getDate()).padStart(2, '0');
            const year = today.getFullYear();
            const formattedDate = `${month}-${day}-${year}`;

            // API PTAX do Banco Central
            const url = `https://olinda.bcb.gov.br/olinda/servico/PTAX/versao/v1/odata/CotacaoDolarDia(dataCotacao=@dataCotacao)?@dataCotacao='${formattedDate}'&$top=1&$format=json`;
            
            const response = await fetch(url);
            const data = await response.json();
            
            // Retorna a cota√ß√£o de venda PTAX
            return data.value[0].cotacaoVenda;
        } catch (error) {
            console.error('Erro ao buscar cota√ß√£o PTAX:', error);
            return 5.75; // Valor fallback atualizado para a cota√ß√£o atual
        }
    }

    // Atualizar a interface com a nova cota√ß√£o
    async function updateExchangeRate() {
        const currentRate = await getCurrentUSDRate();
        const rateElement = document.querySelector('#current-rate');
        if (rateElement) {
            rateElement.textContent = `R$ ${currentRate.toFixed(2)}/USD`;
        }
    }

    // Atualizar a cada 30 minutos (PTAX √© atualizada 4x ao dia)
    setInterval(updateExchangeRate, 30 * 60 * 1000);

    // Primeira atualiza√ß√£o ao carregar a p√°gina
    document.addEventListener('DOMContentLoaded', updateExchangeRate);
    </script>

    <!-- Fun√ß√£o para calcular todos os valores do token -->
    <script>
    function calculateTokenValues(initialDebtBRL, initialUSDRate) {
        // Objeto para armazenar todos os valores calculados
        const calculations = {
            // 1 e 2. Valores iniciais
            initialDebtBRL: initialDebtBRL,
            initialUSDRate: initialUSDRate,
            
            // 3. Initial USD Value
            initialUSDValue: initialDebtBRL / initialUSDRate,
            
            // 4. Token Supply (igual ao Initial USD Value, arredondado para baixo)
            tokenSupply: Math.floor(initialDebtBRL / initialUSDRate),
            
            // 5. Distribui√ß√£o do Supply
            distribution: {
                forOpenSales: 0, // ser√° calculado
                forPools: 0      // ser√° calculado
            },
            
            // 6. Distribui√ß√£o das Open Sales Orders
            openSalesOrders: {
                price050: 0, // ser√° calculado
                price055: 0, // ser√° calculado
                price060: 0  // ser√° calculado
            }
        };
        
        // Calcular distribui√ß√£o do supply
        calculations.distribution.forOpenSales = Math.floor(calculations.tokenSupply * 0.55);
        calculations.distribution.forPools = Math.floor(calculations.tokenSupply * 0.45);
        
        // Calcular distribui√ß√£o das ordens
        calculations.openSalesOrders.price050 = Math.floor(calculations.distribution.forOpenSales * 0.25);
        calculations.openSalesOrders.price055 = Math.floor(calculations.distribution.forOpenSales * 0.35);
        calculations.openSalesOrders.price060 = Math.floor(calculations.distribution.forOpenSales * 0.40);
        
        return calculations;
    }

    // Fun√ß√£o para atualizar a interface com os valores calculados
    function updateInterface(values) {
        // Atualizar valores nas Open Sales Orders
        const orderElements = document.querySelectorAll('.grid.grid-cols-4.items-center');
        if (orderElements.length >= 3) {
            // Ordem 1 ($0.50)
            orderElements[0].querySelector('.text-right.text-xl').textContent = values.openSalesOrders.price050.toLocaleString();
            
            // Ordem 2 ($0.55)
            orderElements[1].querySelector('.text-right.text-xl').textContent = values.openSalesOrders.price055.toLocaleString();
            
            // Ordem 3 ($0.60)
            orderElements[2].querySelector('.text-right.text-xl').textContent = values.openSalesOrders.price060.toLocaleString();
        }
    }

    // Exemplo de uso
    document.addEventListener('DOMContentLoaded', () => {
        const values = calculateTokenValues(5750000, 5.85);
        console.log('Valores calculados:', values);
        /* Resultado esperado:
        {
            initialDebtBRL: 5750000,
            initialUSDRate: 5.85,
            initialUSDValue: 982905.98,
            tokenSupply: 982905,
            distribution: {
                forOpenSales: 540597, // 55% do supply
                forPools: 442308      // 45% do supply
            },
            openSalesOrders: {
                price050: 135149, // 25% do forOpenSales
                price055: 189209, // 35% do forOpenSales
                price060: 216239  // 40% do forOpenSales
            }
        }
        */
        
        updateInterface(values);
    });
    </script>

    <script>
    function updateTotalSupply(initialDebtBRL, initialUSDRate) {
        const tokenSupply = Math.floor(initialDebtBRL / initialUSDRate);
        document.getElementById('total-supply').textContent = tokenSupply.toLocaleString();
    }

    // Atualizar junto com os outros c√°lculos
    document.addEventListener('DOMContentLoaded', () => {
        const values = calculateTokenValues(5750000, 5.85);
        updateTotalSupply(5750000, 5.85);
        updateInterface(values);
        calculateDays();
        calculateTradingDate();
    });
    </script>

    <script>
    function calculateCurrentValues() {
        // 1. Valor inicial da d√≠vida em reais
        const initialDebtBRL = 5750000;
        
        // 2. Cota√ß√µes do d√≥lar
        const initialUSDRate = 5.85;  // Cota√ß√£o na emiss√£o
        const currentUSDRate = 5.75;  // Cota√ß√£o atual (08/02/2025)
        
        // 3. C√°lculo do supply (feito apenas uma vez, na emiss√£o)
        const tokenSupply = Math.floor(initialDebtBRL / initialUSDRate); // 982,905 tokens
        
        // 4. Ajuste monet√°rio da d√≠vida em reais
        const annualRate = 0.12; // 12% a.a.
        const diffTime = Math.abs(CONFIG.currentDate - CONFIG.issueDate);
        const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24)); // 38 dias
        const yearFraction = diffDays / 365;
        const correction = 1 + (annualRate * yearFraction);
        
        // Valor atual da d√≠vida em reais com corre√ß√£o
        const currentDebtBRL = initialDebtBRL * correction;
        
        // 5. Convers√£o para d√≥lar usando a cota√ß√£o atual
        const currentAssetValueUSD = currentDebtBRL / currentUSDRate;
        
        // Valor por token
        const currentTokenValue = currentAssetValueUSD / tokenSupply;
        
        return {
            assetValue: currentAssetValueUSD,
            tokenValue: currentTokenValue
        };
    }

    // Atualizar a interface com os valores calculados
    function updateValues() {
        const values = calculateCurrentValues();
        
        // Atualizar Current Asset Value
        document.getElementById('current-asset-value').textContent = 
            `$${values.assetValue.toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2})}`;
        
        // Atualizar Future Settlement Value / Token
        document.getElementById('token-value').textContent = 
            `$${values.tokenValue.toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2})}`;
    }

    // Chamar quando a p√°gina carregar
    document.addEventListener('DOMContentLoaded', updateValues);
    </script>

    <!-- Fun√ß√£o para calcular o Current Upside -->
    <script>
    function calculateCurrentUpside() {
        // Pegar o pre√ßo atual do token baseado na fase
        const currentTokenPrice = 0.55; // Estamos na fase 2
        
        // Calcular o Future Settlement Value
        const initialDebtBRL = 5750000;
        const initialUSDRate = 5.85;
        const currentUSDRate = 5.75;
        const tokenSupply = Math.floor(initialDebtBRL / initialUSDRate);
        
        // Corre√ß√£o de 38 dias (12% a.a.)
        const yearFraction = 38 / 365;
        const correction = 1 + (0.12 * yearFraction);
        
        // Valor atual em BRL corrigido
        const currentDebtBRL = initialDebtBRL * correction;
        
        // FSV em USD
        const futureSettlementValue = (currentDebtBRL / currentUSDRate) / tokenSupply;
        
        // C√°lculo do upside
        const upside = ((futureSettlementValue - currentTokenPrice) / currentTokenPrice) * 100;
        
        return Math.round(upside);
    }

    // Fun√ß√£o para atualizar o upside na interface
    function updateUpside() {
        const upside = calculateCurrentUpside();
        const upsideElement = document.getElementById('current-upside');
        if (upsideElement) {
            upsideElement.textContent = `${upside}%`;
        }
    }

    // Atualizar quando a p√°gina carregar
    document.addEventListener('DOMContentLoaded', () => {
        updateUpside();
    });
    </script>
</body>
</html> 